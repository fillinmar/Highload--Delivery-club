# Delivery-club

## 1. Тема и целевая аудитория
### 1.1. Тема
[Delivery-club](https://www.delivery-club.ru/) - сервис доставки еды и продуктов в России.
### 1.2. Целевая аудитория
За ноябрь 2022 года насчитывает 2.8 млн посетителей сайта в месяц [[2]](https://www.similarweb.com/ru/website/delivery-club.ru) 
или 0.1 млн посетителей в день.

Можно выделить 3 сегмента стран которые, чаще других посещают Delivery-club чаще всего посещают в России - 97.82% [[2]](https://www.similarweb.com/ru/website/delivery-club.ru), 

### 1.3. MVP
* регистрация и авторизация
* поиск ресторана по поисковой строке
* поиск блюда по поисковой строке
* фильтрация ресторана по категориям
* просмотр списка ресторанов (24 ресторана на одной странице)
* просмотр меню ресторана (загружается все меню сразу)
* работа с корзиной (добавление, удаление)
* заказ блюд
* написание отзыва на ресторан

## 2. Расчет нагрузки
### 2.1. Продуктовые метрики

#### 2.1.1. Дневная аудитория
Ежедневно страницу Delivery-club открывают **100 тыс.** раз, по итогу февраля 2022 года.
Точных данных о количестве пользователей в день нет, поэтому используя число в 100 тыс. оценочно рассчитаем это число.
Возьмем коэффициент 0.75, получаем `100тыс * 0.75 = 75тыс` уникальных пользователей в день.

#### 2.1.2. Среднее количество действий пользователя
Средняя продолжительность сессии одного пользователя 8 мин 18 секунд. 
За это время пользователь в среднем посещает 16 страниц [[2]](https://www.similarweb.com/website/delivery-club.ru)

Используя личный опыт и опыт знакомых, был составлен сценарий стандартного поведения пользователя на сайте.
Стоит отметить что оценкой является достаточно субъективной,
и количество посещения разных страниц может сильно различаться в зависимости от пользовательского сценария.

* регистрация или авторизация: 0-1 раз (0.5)
* поиск блюда по поисковой строке: 2-5 раз (3.5)
* просмотр списка ресторанов и изменение категорий: 2-5 * 2 раз (6)
* просмотр страницы ресторана: 1-2 раз (1.5)
* добавление в корзину: 0-8 раз (4)
* удаление из корзины: 0-2 раз (1)
* оформление заказа: 0-1 раз (0.5)
* написание отзыва на ресторан: 0-1 раз (0.5)

### 2.2. Технические метрики
Необходимо учесть, что трафик неравномерно распределяется по суткам.
Учитывая, что абсолютное большинство аудитории находится в России, а именно в европейской ее части,
в расчетах на сетевой трафик и RPS нужно умножать на коэффициент 2.

#### 2.2.1. Общий объем изображений блюд
delivery-club предлагает покупателям блюда более чем из 40000 ресторанов [[1]](https://www.delivery-club.ru/moscow).
В каждый ресторане в среднем представлено 150 блюд. На каждое блюдо 1 фотография, при этом каждое изображение весит в среднем 50 KB.
Отсюда получаем `150 * 40000 * 50 = 0.28 Тб`.

#### 2.2.2. Сетевой трафик
Основным типом трафика является получение списка блюд в ресторане. 

* Каталог блюд ресторана
  При просмотре списка блюд, необходимо загрузить 150 изображений, вес одного изображения составляет 50 KB.
  Получаем 7500 KB которые надо загрузить, учитывая трафик, получаем:
  `7500 * 1.5 * 100000 * 2 / 24 / 3600 = 25 MB/s`
  
#### 2.2.3. Расчет RPS
Пользователь сайта в среднем совершает 17 операций. Получаем: 
`RPS = 17 * 100000 * 2 / 24 / 3600 = 39`.

Запросы на чтение:
* поиск блюда по поисковой строке: **8 RPS**
* просмотр списка ресторанов и изменение категорий: **13 RPS**
* просмотр страницы ресторана: **3 RPS**

Запросы на запись:
* регистрация или авторизация: **2 RPS**
* работа с корзиной (добавление, удаление): **11 RPS**
* оформление заказа: **2 RPS**
* написание отзыва: **1 RPS**

## 3. Источники
1. https://www.delivery-club.ru/
2. https://www.similarweb.com/website/delivery-club.ru/
